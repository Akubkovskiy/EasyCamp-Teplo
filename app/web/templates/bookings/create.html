{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="dashboard-layout" style="display: flex; min-height: 100vh;">
    <!-- Sidebar -->
    <div class="sidebar" style="width: 250px; background: white; border-right: 1px solid #e5e7eb; padding: 2rem;">
        <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 2rem;">{{ project_name or "EasyCamp" }}</h2>
        <nav>
            <a href="/admin-web/" style="display: block; padding: 0.75rem 0; color: #4b5563; text-decoration: none;">üè†
                –î–∞—à–±–æ—Ä–¥</a>
            <a href="/admin-web/houses"
                style="display: block; padding: 0.75rem 0; color: #4b5563; text-decoration: none;">üè°
                –î–æ–º–∞</a>
            <a href="/admin-web/bookings"
                style="display: block; padding: 0.75rem 0; color: #2563eb; font-weight: 500;">üìÖ
                –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</a>
            <a href="/admin-web/settings"
                style="display: block; padding: 0.75rem 0; color: #4b5563; text-decoration: none;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a href="/admin-web/logout"
                style="display: block; padding: 0.75rem 0; color: #dc2626; margin-top: 2rem; text-decoration: none;">–í—ã—Ö–æ–¥</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main" style="flex: 1; padding: 2rem;">
        <div style="margin-bottom: 2rem;">
            <a href="/admin-web/bookings" style="color: #2563eb; text-decoration: none; font-size: 0.875rem;">‚Üê –ù–∞–∑–∞–¥ –∫
                —Å–ø–∏—Å–∫—É</a>
        </div>

        <h1 style="font-size: 1.875rem; font-weight: bold; margin-bottom: 2rem;">{{ title }}</h1>

        {% if request.query_params.get('error') %}
        <div style="background: #fee2e2; color: #991b1b; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
            –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.
        </div>
        {% endif %}

        <form method="post" action="/admin-web/bookings/new">
            <div class="auth-card" style="max-width: 900px;">
                <h2 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem;">–î–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>

                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div>
                        <label class="label">–î–æ–º–∏–∫</label>
                        <select name="house_id" class="input" required>
                            <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º–∏–∫...</option>
                            {% for house in houses %}
                            <option value="{{ house.id }}">
                                {{ house.name }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div>
                        <label class="label">–°—Ç–∞—Ç—É—Å</label>
                        <select name="status" class="input" required>
                            <option value="checking_in" selected>–ñ–¥—ë—Ç –∑–∞—Å–µ–ª–µ–Ω–∏—è</option>
                            <option value="confirmed">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</option>
                            <option value="paid">–û–ø–ª–∞—á–µ–Ω–∞</option>
                            <option value="new">–ù–æ–≤–∞—è</option>
                        </select>
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ—Å—Ç–µ -->
                <h3 style="font-size: 1.125rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem;">–ì–æ—Å—Ç—å</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div>
                        <label class="label">–ò–º—è –≥–æ—Å—Ç—è</label>
                        <input type="text" name="guest_name" class="input" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" required>
                    </div>

                    <div>
                        <label class="label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="text" name="guest_phone" class="input" placeholder="+7 (900) 000-00-00" required>
                    </div>

                    <div>
                        <label class="label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π</label>
                        <input type="number" name="guests_count" class="input" value="2" min="1" required>
                    </div>
                </div>

                <!-- –î–∞—Ç—ã -->
                <h3 style="font-size: 1.125rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem;">–î–∞—Ç—ã</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div>
                        <label class="label">–î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞</label>
                        <input type="date" name="check_in" class="input" required>
                    </div>

                    <div>
                        <label class="label">–î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞</label>
                        <input type="date" name="check_out" class="input" required>
                    </div>
                </div>

                <!-- –§–∏–Ω–∞–Ω—Å—ã -->
                <h3 style="font-size: 1.125rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem;">–§–∏–Ω–∞–Ω—Å—ã</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div>
                        <label class="label">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (‚ÇΩ)</label>
                        <input type="number" name="total_price" class="input" placeholder="0" step="0.01" required>
                    </div>

                    <div>
                        <label class="label">–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ (‚ÇΩ)</label>
                        <input type="number" name="advance_amount" class="input" value="0" step="0.01">
                    </div>

                    <div>
                        <label class="label">–ö–æ–º–∏—Å—Å–∏—è (‚ÇΩ)</label>
                        <input type="number" name="commission" class="input" value="0" step="0.01">
                    </div>

                    <div>
                        <label class="label">–í–ª–∞–¥–µ–ª—å—Ü—É (‚ÇΩ)</label>
                        <input type="number" name="prepayment_owner" class="input" value="0" step="0.01">
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div
                    style="display: flex; gap: 1rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e5e7eb;">
                    <button type="submit" class="btn" style="width: auto; padding: 0.75rem 2rem;">
                        ‚ú® –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                    </button>
                    <a href="/admin-web/bookings" class="btn"
                        style="background: #6b7280; width: auto; padding: 0.75rem 2rem; text-decoration: none;">
                        –û—Ç–º–µ–Ω–∞
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}