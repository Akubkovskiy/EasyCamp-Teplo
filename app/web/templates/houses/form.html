{% extends "base.html" %}
{% from "components/help_tooltip.html" import help_icon %}

{% block title %}{% if house %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º{% else %}–ù–æ–≤—ã–π –¥–æ–º{% endif %}{% endblock %}

{% block content %}
<div class="dashboard-layout" style="display: flex; min-height: 100vh;">
    <!-- Sidebar -->
    <div class="sidebar" style="width: 250px; background: white; border-right: 1px solid #e5e7eb; padding: 2rem;">
        <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 2rem;">{{ project_name }}</h2>
        <nav>
            <a href="/admin-web/" style="display: block; padding: 0.75rem 0; color: #4b5563; text-decoration: none;">üè†
                –î–∞—à–±–æ—Ä–¥</a>
            <a href="/admin-web/houses" style="display: block; padding: 0.75rem 0; color: #2563eb; font-weight: 500;">üè°
                –î–æ–º–∞</a>
            <a href="/admin-web/settings"
                style="display: block; padding: 0.75rem 0; color: #4b5563; text-decoration: none;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a href="/admin-web/logout"
                style="display: block; padding: 0.75rem 0; color: #dc2626; margin-top: 2rem; text-decoration: none;">–í—ã—Ö–æ–¥</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main" style="flex: 1; padding: 2rem;">
        <div style="display: flex; align-items: center; margin-bottom: 2rem;">
            <a href="/admin-web/houses" style="text-decoration: none; color: #6b7280; margin-right: 1rem;">&larr;
                –ù–∞–∑–∞–¥</a>
            <h1 style="font-size: 1.875rem; font-weight: bold; margin: 0;">
                {% if house %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å {{ house.name }}{% else %}–°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–∞{% endif %}
            </h1>
        </div>

        <div class="auth-card" style="max-width: 800px;">
            <form action="/admin-web/houses{% if house %}/{{ house.id }}{% endif %}" method="post">

                <!-- Basic Info -->
                <h3 style="margin-bottom: 1rem; border-bottom: 1px solid #eee; padding-bottom: 0.5rem;">üè† –û—Å–Ω–æ–≤–Ω–æ–µ</h3>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label" for="name">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–º–∞:</label>
                    <input class="form-input" type="text" id="name" name="name" required
                        value="{{ house.name if house else '' }}" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê-–§—Ä–µ–π–º –ë–æ–ª—å—à–æ–π">
                </div>

                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <label class="form-label" for="capacity">–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—á–µ–ª):</label>
                        <input class="form-input" type="number" id="capacity" name="capacity" required
                            value="{{ house.capacity if house else 2 }}" min="1">
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label" for="description">–û–ø–∏—Å–∞–Ω–∏–µ (–¥–ª—è –±–æ—Ç–∞):</label>
                    <textarea class="form-input" id="description" name="description"
                        rows="3">{{ house.description if house else '' }}</textarea>
                </div>

                <!-- Dynamic Content -->
                <h3 style="margin: 2rem 0 1rem 0; border-bottom: 1px solid #eee; padding-bottom: 0.5rem;">üìÑ –ò–Ω—Ñ–æ –¥–ª—è
                    –≥–æ—Å—Ç–µ–π</h3>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label" for="wifi_info">Wi-Fi (SSID/Pass): {{ help_icon('wifi_info') }}</label>
                    <textarea class="form-input" id="wifi_info" name="wifi_info" rows="2"
                        placeholder="–°–µ—Ç—å: EasyCamp&#10;–ü–∞—Ä–æ–ª—å: 12345678">{{ house.wifi_info if house else '' }}</textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label" for="checkin_instruction">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞—Å–µ–ª–µ–Ω–∏—é: {{
                        help_icon('checkin_instruction') }}</label>
                    <textarea class="form-input" id="checkin_instruction" name="checkin_instruction"
                        rows="4">{{ house.checkin_instruction if house else '' }}</textarea>
                </div>

                <hr style="margin: 2rem 0; border: 0; border-top: 1px solid #eee;">

                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <button type="submit" class="btn" style="width: auto; padding-left: 2rem; padding-right: 2rem;">
                        üíæ {% if house %}–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è{% else %}–°–æ–∑–¥–∞—Ç—å –¥–æ–º{% endif %}
                    </button>

                    {% if house %}
                    <button type="submit" form="delete-form" class="btn"
                        style="width: auto; background: #fee2e2; color: #dc2626; border: 1px solid #fecaca;"
                        onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–º–∞ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.');">
                        üóë –£–¥–∞–ª–∏—Ç—å –¥–æ–º
                    </button>
                    {% endif %}
                </div>
            </form>

            {% if house %}
            <form id="delete-form" action="/admin-web/houses/{{ house.id }}/delete" method="post"
                style="display: none;"></form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}