# –ê–Ω–∞–ª–∏–∑ –†–æ–ª–∏: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (Admin)

## 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –î–æ—Å—Ç—É–ø
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø–æ–ª–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–∏—Å—Ç–µ–º–µ.

**–ú–µ—Ö–∞–Ω–∏–∑–º –¥–æ—Å—Ç—É–ø–∞:**
- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ü–æ Telegram ID.
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** 
  1. –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (Superuser, ID –∏–∑ `.env`) –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –º–µ–Ω—é:
     `‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏` -> `üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏` -> `–î–æ–±–∞–≤–∏—Ç—å –ê–¥–º–∏–Ω–∞`.
  2. –ù–µ–æ–±—Ö–æ–¥–∏–º Telegram ID (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ `@userinfobot`).
- **–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ `/start` –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ID –≤ —Ç–∞–±–ª–∏—Ü–µ `users`. –ï—Å–ª–∏ —Ä–æ–ª—å `admin` ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.

## 2. –ú–µ–Ω—é –∏ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ ¬´–Ω–∞ —Ö–æ–¥—É¬ª.

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (`/start`):
- **üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å / –ë—Ä–æ–Ω–∏**: 
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–µ–π –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ –¥–Ω–∏ (–°–µ–≥–æ–¥–Ω—è/–ó–∞–≤—Ç—Ä–∞).
  - *–î–µ—Ç–∞–ª—å:* –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å, –¥–æ–º, –∏–º—è –≥–æ—Å—Ç—è.
- **‚ûï –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω—å**: 
  - –ó–∞–ø—É—Å–∫ Wizard-–∞ (–º–∞—Å—Ç–µ—Ä–∞) –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è.
  - *–í–∞–∂–Ω–æ:* –°—Ä–∞–∑—É –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–∞—Ç—ã –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ Avito.
- **üè† –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: 
  - –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –¥–æ–º–æ–≤ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞—Ç—ã.
- **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏**: 
  - –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é.
- **üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: 
  - –ö–Ω–æ–ø–∫–∞ ¬´–ü–∞–Ω–∏–∫–∏¬ª. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç sync —Å Avito –∏ Google Sheets –≤–Ω–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.

### –ú–µ–Ω—é –ù–∞—Å—Ç—Ä–æ–µ–∫:
- **üîÑ –ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á.
- **üìÖ –ü–µ—Ä–∏–æ–¥ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫–Ω–∞ –ø—Ä–æ–¥–∞–∂ (Booking Window).
- **‚è∞ –í—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞—Å—Å—ã–ª–∫–∏ –¥–ª—è —É–±–æ—Ä—â–∏—Ü.
- **üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: CRUD –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.

## 3. –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (Actions & Rules)

### –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏ (–†—É—á–Ω–æ–µ)
- **–ü–æ–ª—è:** –ò–º—è, –¢–µ–ª–µ—Ñ–æ–Ω, –î–∞—Ç—ã (–ó–∞–µ–∑–¥/–í—ã–µ–∑–¥), –î–æ–º, –°—É–º–º–∞, –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞.
- **–õ–æ–≥–∏–∫–∞:**
  - –¶–µ–Ω–∞ = –ê–≤–∞–Ω—Å (–≤–≤–µ–¥–µ–Ω–Ω—ã–π) + –û—Å—Ç–∞—Ç–æ–∫.
  - –°—Ç–∞—Ç—É—Å = `CONFIRMED` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä—É—á–Ω—ã—Ö).
  - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å–ª–∏ –¥–∞—Ç—ã –∑–∞–Ω—è—Ç—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π).

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±—Ä–æ–Ω—å—é
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å "–í–∏—Å—è—á—É—é" –±—Ä–æ–Ω—å –∏–∑ Avito).
- **–û—Ç–º–µ–Ω–∞:** 
  - –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏ –±–æ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç** –¥–∞—Ç—ã –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ Avito.
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≥–æ—Å—Ç—é –ø—Ä–∏ —ç—Ç–æ–º **–Ω–µ** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (–∞–¥–º–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–≤—è–∑–∞—Ç—å—Å—è –ª–∏—á–Ω–æ).

## 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notification Service (–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

| –°–æ–±—ã—Ç–∏–µ | –¢—Ä–∏–≥–≥–µ—Ä | –°–æ–æ–±—â–µ–Ω–∏–µ |
| :--- | :--- | :--- |
| **New Booking** | Webhook Avito | "üì© –ù–æ–≤–∞—è –±—Ä–æ–Ω—å! –î–æ–º: Teplo 1..." |
| **Booking Paid** | Webhook Avito | "üí∞ –ë—Ä–æ–Ω—å –æ–ø–ª–∞—á–µ–Ω–∞! –ë–∞–ª–∞–Ω—Å: +5000—Ä" |
| **Booking Cancelled** | Webhook Avito | "‚ùå –ë—Ä–æ–Ω—å –æ—Ç–º–µ–Ω–µ–Ω–∞ –≥–æ—Å—Ç–µ–º." |
| **Cleaner Decline** | NotificationService | "üö® **SOS!** –£–±–æ—Ä—â–∏—Ü–∞ [–ò–º—è] –æ—Ç–∫–∞–∑–∞–ª–∞—Å—å –æ—Ç —Å–º–µ–Ω—ã [–î–∞—Ç–∞]!" |

## 5. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- **–ü—Ä–∞–≤–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `UserRole.ADMIN` –≤ –∫–∞–∂–¥–æ–º —Ö–µ–Ω–¥–ª–µ—Ä–µ (–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã/—Ñ–∏–ª—å—Ç—Ä—ã).
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (`lru_cache`) –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–∞–≤. –°–±—Ä–æ—Å –∫—ç—à–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
